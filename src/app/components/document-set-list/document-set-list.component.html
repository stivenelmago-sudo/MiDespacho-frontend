<section role="region" aria-labelledby="document-sets-title" class="space-y-4">
  @if (_documentSets().length === 0) {
  <div class="card border-l-4 border-blue-500 bg-blue-50 animate-fade-in">
    <div class="text-center py-12">
      <div class="text-6xl mb-4">ğŸ“­</div>
      <p class="text-lg font-semibold text-gray-900">No documents uploaded yet</p>
      <p class="text-sm text-gray-600 mt-2">
        Upload your first document set to get started
      </p>
    </div>
  </div>
  } @else {
  <div class="grid gap-4">
    @for (docSet of _documentSets(); track docSet.id) {
    <div
      class="card border-l-4 border-blue-500 hover:border-blue-600 hover:shadow-lg transition-all duration-300 animate-slide-up"
      role="region" [attr.aria-label]="'Document set: ' + docSet.title">
      <!-- Set Header -->
      <div class="flex justify-between items-start mb-4 pb-4 border-b border-gray-200">
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-2">
            <span class="text-xl">ğŸ“‹</span>
            <h3 class="text-xl font-bold text-gray-900">{{ docSet.title }}</h3>
          </div>
          <p class="text-sm text-gray-600 ml-8">{{ docSet.description }}</p>
          <div class="flex gap-6 mt-3 ml-8 text-sm text-gray-500">
            <span class="flex items-center gap-1">
              <span>ğŸ“</span>
              <strong>{{ docSet.files.length }}</strong>
              {{ docSet.files.length === 1 ? 'file' : 'files' }}
            </span>
            <span class="flex items-center gap-1">
              <span>ğŸ“…</span>
              {{ formatDate(docSet.created_at) }}
            </span>
          </div>
        </div>
        <button (click)="deleteSet(docSet.id)" [disabled]="isDeleting() === docSet.id"
          class="btn btn-danger btn-sm ml-4 flex items-center gap-2"
          [attr.aria-label]="'Delete document set: ' + docSet.title" title="Delete set">
          ğŸ—‘ï¸
          {{ isDeleting() === docSet.id ? 'Deleting...' : 'Delete' }}
        </button>
      </div>

      <!-- Files list -->
      @if (docSet.files.length > 0) {
      <div class="space-y-2">
        <p class="text-xs font-semibold text-gray-600 uppercase tracking-wide">
          Included files
        </p>
        <ul role="list" class="space-y-2">
          @for (file of docSet.files; track file.id) {
          <li role="listitem"
            class="flex items-center justify-between p-3 bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200">
            <div class="flex items-center space-x-3 flex-1 min-w-0">
              <span class="text-lg">ğŸ“„</span>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-gray-900 truncate" [title]="file.original_name">
                  {{ file.original_name }}
                </p>
                <p class="text-xs text-gray-500 mt-1">
                  <span class="text-blue-600 font-semibold">
                    {{ formatFileSize(file.size_bytes) }}
                  </span>
                  â€¢
                  {{ formatDate(file.created_at) }}
                </p>
              </div>
            </div>
            <button (click)="downloadFile(file.id, file.original_name)"
              class="btn btn-secondary btn-sm mr-2 flex-shrink-0"
              [attr.aria-label]="'Download file: ' + file.original_name" title="Download file">
              â¬‡ï¸
            </button>
            <button (click)="deleteFile(file.id)" [disabled]="isDeleting() === file.id"
              class="btn btn-danger btn-sm ml-2 flex-shrink-0" [attr.aria-label]="'Delete file: ' + file.original_name"
              title="Delete file">
              {{ isDeleting() === file.id ? 'â³' : 'âœ•' }}
            </button>
          </li>
          }
        </ul>
      </div>
      }
    </div>
    }
  </div>
  }
</section>
